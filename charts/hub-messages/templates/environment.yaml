apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "hub-messages.fullname" . }}
data:
  {{- with .Values.environment }}
  RUST_LOG: {{ .logLevel }}
  KAFKA_BROKERS: {{ required "must set kafka brokers" .kafkaBrokers | quote }}
  KAFKA_SSL: {{ default "false" .kafkaSsl | quote }}
  KAFKA_USERNAME: {{ required "must set kafka username" .kafkaUsername | quote }}
  SMTP_SERVER: {{ required "must set SMTP server" .entries.smtpServer | b64enc }}
  SMTP_PORT: {{ required "must set SMTP port" .entries.smtpPort | b64enc }}
  SMTP_POOL_SIZE: {{ default "100" .smtpPoolSize | quote }}
  {{- end }}
